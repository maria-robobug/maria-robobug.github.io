<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Install and Start Using the Scala SDK with Couchbase Server | Couchbase Docs (Local)</title>
<link rel="canonical" href="https://maria-robobug.github.io/scala-sdk/1.3/hello-world/start-using-sdk.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Get up and running quickly, installing the Couchbase Scala SDK, and running our Hello World example.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="scala-sdk">
<meta name="dcterms.identifier" content="1.3">
<meta name="page-url" content="/scala-sdk/1.3/hello-world/start-using-sdk.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://maria-robobug.github.io/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://maria-robobug.github.io/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud-native-database/index.html">
                      Cloud-Native
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/pages/start-using-sdk.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="overview.html">Scala SDK</a></li>
<li class="crumb">Getting Started</li>
<li class="crumb"><a href="start-using-sdk.html">Start Using the SDK</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Install and Start Using the Scala SDK with Couchbase Server</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Get up and running quickly, installing the Couchbase Scala SDK, and running our Hello World example.
</blockquote>
</div>
<div class="paragraph">
<p>The Couchbase Scala SDK allows Scala applications to access a Couchbase cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hello-couchbase"><a class="anchor" href="#hello-couchbase"></a>Hello Couchbase</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On this page we show you how to quickly get up and running&#8201;&#8212;&#8201;installing the Couchbase Scala SDK, and trying out the <em>Hello World</em> code example against Couchbase Capella, or against a local Couchbase cluster.</p>
</div>
<div class="paragraph">
<p>We will go through the code sample step by step, but for those in a hurry to see it, here it is:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_couchbase-capella-sample"></a>Couchbase Capella Sample</p>
</li>
<li>
<p><a id="tabset1_local-couchbase-server"></a>Local Couchbase Server</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_couchbase-capella-sample">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala">/*
 * Copyright (c) 2022 Couchbase, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import com.couchbase.client.scala.durability.Durability
import com.couchbase.client.scala.env.{
  ClusterEnvironment,
  SecurityConfig,
  TimeoutConfig
}
import com.couchbase.client.scala.json.{JsonObject, JsonObjectSafe}
import com.couchbase.client.scala.kv.ReplaceOptions
import com.couchbase.client.scala.{Cluster, ClusterOptions}
import io.netty.handler.ssl.util.InsecureTrustManagerFactory

import java.nio.file.Path
import java.util.UUID
import scala.concurrent.duration._
import scala.util.{Failure, Success, Try}

object Cloud {
  def main(args: Array[String]): Unit = {
    // Update this to your cluster
    val endpoint = "cb.&lt;your-endpoint&gt;.cloud.couchbase.com"
    val username = "username"
    val password = "Password123!"
    val bucketName = "travel-sample"

    val env = ClusterEnvironment.builder
      .securityConfig(
        SecurityConfig()
          .enableTls(true)
      )
      .timeoutConfig(
        TimeoutConfig()
          .kvTimeout(10.seconds)
      )
      .build
      .get

    val cluster = Cluster
      .connect(
        "couchbases://" + endpoint,
        ClusterOptions
          .create(username, password)
          .environment(env)
      )
      .get

    val bucket = cluster.bucket(bucketName)
    bucket.waitUntilReady(30.seconds).get

    // get a reference to the default collection, required for Couchbase server 6.5 or earlier
    // val collection = bucket.defaultCollection

    val collection = bucket.scope("inventory").collection("airport")

    val json = JsonObject("status" -&gt; "awesome")

    val docId = UUID.randomUUID().toString
    collection.upsert(docId, json) match {
      case Success(result)    =&gt;
      case Failure(exception) =&gt; println("Error: " + exception)
    }

    // Get a document
    collection.get(docId) match {
      case Success(result) =&gt;
        // Convert the content to a JsonObjectSafe
        result.contentAs[JsonObjectSafe] match {
          case Success(json) =&gt;
            // Pull out the JSON's status field, if it exists
            json.str("status") match {
              case Success(hello) =&gt; println(s"Couchbase is $hello")
              case _              =&gt; println("Field 'status' did not exist")
            }
          case Failure(err) =&gt; println("Error decoding result: " + err)
        }
      case Failure(err) =&gt; println("Error getting document: " + err)
    }

    def getFor() {
      val result: Try[String] = for {
        result &lt;- collection.get(docId)
        json &lt;- result.contentAs[JsonObjectSafe]
        status &lt;- json.str("status")
      } yield status

      result match {
        case Success(status) =&gt; println(s"Couchbase is $status")
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }

    def getMap() {
      val result: Try[String] = collection
        .get(docId)
        .flatMap(_.contentAs[JsonObjectSafe])
        .flatMap(_.str("status"))

      result match {
        case Success(status) =&gt; println(s"Couchbase is $status")
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }

    def replaceOptions() {
      collection.replace(
        docId,
        json,
        ReplaceOptions()
          .expiry(10.seconds)
          .durability(Durability.Majority)
      ) match {
        case Success(status) =&gt;
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }

    def replaceNamed() {
      collection.replace(docId, json, durability = Durability.Majority) match {
        case Success(status) =&gt;
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_local-couchbase-server">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/StartUsing.scala">/*
 * Copyright (c) 2022 Couchbase, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import com.couchbase.client.scala.durability.Durability
import com.couchbase.client.scala.env.{
  ClusterEnvironment,
  SecurityConfig,
  TimeoutConfig
}
import com.couchbase.client.scala.json.{JsonObject, JsonObjectSafe}
import com.couchbase.client.scala.kv.ReplaceOptions
import com.couchbase.client.scala.{Cluster, ClusterOptions}
import io.netty.handler.ssl.util.InsecureTrustManagerFactory

import java.nio.file.Path
import java.util.UUID
import scala.concurrent.duration._
import scala.util.{Failure, Success, Try}

object StartUsing {
  def main(args: Array[String]): Unit = {
    // Update this to your cluster
    val username = "Administrator"
    val password = "password"
    val bucketName = "travel-sample"

    val env = ClusterEnvironment.builder
      // You should uncomment this if running in a production environment.
      // .securityConfig(
      //   SecurityConfig()
      //     .enableTls(true)
      //     .trustCertificate(Path.of("/path/to/cluster-root-certificate.pem"))
      // )
      .timeoutConfig(
        TimeoutConfig()
          .kvTimeout(10.seconds)
      )
      .build
      .get

    val cluster = Cluster
      .connect(
        "couchbase://localhost",
        ClusterOptions
          .create(username, password)
          .environment(env)
      )
      .get

    val bucket = cluster.bucket(bucketName)
    bucket.waitUntilReady(30.seconds).get

    val collection = bucket.defaultCollection

    val json = JsonObject("status" -&gt; "awesome")

    val docId = UUID.randomUUID().toString
    collection.upsert(docId, json) match {
      case Success(result)    =&gt;
      case Failure(exception) =&gt; println("Error: " + exception)
    }

    // Get a document
    collection.get(docId) match {
      case Success(result) =&gt;
        // Convert the content to a JsonObjectSafe
        result.contentAs[JsonObjectSafe] match {
          case Success(json) =&gt;
            // Pull out the JSON's status field, if it exists
            json.str("status") match {
              case Success(hello) =&gt; println(s"Couchbase is $hello")
              case _              =&gt; println("Field 'status' did not exist")
            }
          case Failure(err) =&gt; println("Error decoding result: " + err)
        }
      case Failure(err) =&gt; println("Error getting document: " + err)
    }

    def getFor() {
      val result: Try[String] = for {
        result &lt;- collection.get(docId)
        json &lt;- result.contentAs[JsonObjectSafe]
        status &lt;- json.str("status")
      } yield status

      result match {
        case Success(status) =&gt; println(s"Couchbase is $status")
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }

    def getMap() {
      val result: Try[String] = collection
        .get(docId)
        .flatMap(_.contentAs[JsonObjectSafe])
        .flatMap(_.str("status"))

      result match {
        case Success(status) =&gt; println(s"Couchbase is $status")
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }

    def replaceOptions() {
      collection.replace(
        docId,
        json,
        ReplaceOptions()
          .expiry(10.seconds)
          .durability(Durability.Majority)
      ) match {
        case Success(status) =&gt;
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }

    def replaceNamed() {
      collection.replace(docId, json, durability = Durability.Majority) match {
        case Success(status) =&gt;
        case Failure(err)    =&gt; println("Error: " + err)
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The Couchbase Capella free trial version comes with the Travel Sample Bucket, and its Query indexes, loaded and ready.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quick-install"><a class="anchor" href="#quick-install"></a>Quick Install</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A more detailed guide in our <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation page</a> covers every supported platform, but this section should be enough to get up and running in most cases.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_sbt"></a>SBT</p>
</li>
<li>
<p><a id="tabset2_gradle"></a>Gradle</p>
</li>
<li>
<p><a id="tabset2_maven"></a>Maven</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_sbt">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sbt hljs" data-lang="sbt">libraryDependencies += "com.couchbase.client" %% "scala-client" % "1.3.0"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will automatically use the Scala 2.12 or 2.13 builds, as appropriate for your SBT project.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_gradle">
<div class="paragraph">
<p>It can be included in your <code>build.gradle</code> like this for 2.13:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">dependencies {
    compile group: 'com.couchbase.client', name: 'scala-client_2.13', version: '1.3.0'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Scala 2.12, refer to the full <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation page</a>.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_maven">
<div class="paragraph">
<p>It can be included in your Maven <code>pom.xml</code> like this for 2.13:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.couchbase.client&lt;/groupId&gt;
        &lt;artifactId&gt;scala-client_2.13&lt;/artifactId&gt;
        &lt;version&gt;1.3.0&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Scala 2.12, refer to the full <a href="../project-docs/sdk-full-installation.html" class="xref page">Installation page</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step-by-step"><a class="anchor" href="#step-by-step"></a>Step by Step</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here&#8217;s the above Hello World example, broken down into individual actions.</p>
</div>
<div class="sect2">
<h3 id="connecting-to-a-cluster"><a class="anchor" href="#connecting-to-a-cluster"></a>Connecting to a Cluster</h3>
<div class="paragraph">
<p>Now you have the Scala client installed, try out the following to connect to a Couchbase cluster.</p>
</div>
<div class="paragraph">
<p>First pull in all the imports we&#8217;ll be using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L18-L32">import com.couchbase.client.scala.durability.Durability
import com.couchbase.client.scala.env.{
  ClusterEnvironment,
  SecurityConfig,
  TimeoutConfig
}
import com.couchbase.client.scala.json.{JsonObject, JsonObjectSafe}
import com.couchbase.client.scala.kv.ReplaceOptions
import com.couchbase.client.scala.{Cluster, ClusterOptions}
import io.netty.handler.ssl.util.InsecureTrustManagerFactory

import java.nio.file.Path
import java.util.UUID
import scala.concurrent.duration._
import scala.util.{Failure, Success, Try}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The basic connection details that you&#8217;ll need are given below&#8201;&#8212;&#8201;for more background information, refer to the <a href="../howtos/managing-connections.html#connection-strings" class="xref page">Managing Connections page</a>.</p>
</div>
<div class="paragraph">
<p>Now we can connect to the cluster:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_couchbase-capella"></a>Couchbase Capella</p>
</li>
<li>
<p><a id="tabset3_local-couchbase-server"></a>Local Couchbase Server</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_couchbase-capella">
<div class="paragraph">
<p>You connect to a <a href="https://docs.couchbase.com/cloud/index.html">Couchbase Capella</a> cluster the same as any other cluster, except that the use of TLS and a certificate is mandatory, and the "couchbases://" connection string prefix should be used to allow DNS SRV lookup.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
As of Scala SDK version 1.3.0, the standard certificate required to connect to a Capella cluster is automatically included with no additional configuration.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L38-L63">// Update this to your cluster
val endpoint = "cb.&lt;your-endpoint&gt;.cloud.couchbase.com"
val username = "username"
val password = "Password123!"
val bucketName = "travel-sample"

val env = ClusterEnvironment.builder
  .securityConfig(
    SecurityConfig()
      .enableTls(true)
  )
  .timeoutConfig(
    TimeoutConfig()
      .kvTimeout(10.seconds)
  )
  .build
  .get

val cluster = Cluster
  .connect(
    "couchbases://" + endpoint,
    ClusterOptions
      .create(username, password)
      .environment(env)
  )
  .get</code></pre>
</div>
</div>
<div class="paragraph">
<p>Couchbase Capella uses <a href="../../../cloud/organizations/organization-projects-overview.html" class="xref page">Roles</a> to control user access to database resources.
For the purposes of this example, we can use the <em>Organization Owner</em> role automatically assigned to a user account during installation of the Capella cluster.
This role grants full access to a Capella organization, including full data access to all projects and clusters.
In a production scenario, we strongly recommend setting up users with more granular access roles as a best practice.</p>
</div>
<div class="paragraph">
<p>For the SDK client to access cluster data, you will need to set up credentials for your database by <a href="../../../cloud/get-started/cluster-and-data.html#credentials" class="xref page">following these steps</a>.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_local-couchbase-server">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/StartUsing.scala#L36-L62">// Update this to your cluster
val username = "Administrator"
val password = "password"
val bucketName = "travel-sample"

val env = ClusterEnvironment.builder
  // You should uncomment this if running in a production environment.
  // .securityConfig(
  //   SecurityConfig()
  //     .enableTls(true)
  //     .trustCertificate(Path.of("/path/to/cluster-root-certificate.pem"))
  // )
  .timeoutConfig(
    TimeoutConfig()
      .kvTimeout(10.seconds)
  )
  .build
  .get

val cluster = Cluster
  .connect(
    "couchbase://localhost",
    ClusterOptions
      .create(username, password)
      .environment(env)
  )
  .get</code></pre>
</div>
</div>
<div class="paragraph">
<p>Couchbase uses <a href="../../../server/7.1/learn/security/roles.html" class="xref page">Role Based Access Control (RBAC)</a> to control access to resources.
For the purposes of this example, we are connecting to Couchbase using the <em>Full Admin</em> role created during the installation of our Couchbase Server.</p>
</div>
<div class="paragraph">
<p>Couchbase RBAC is fully described in the <a href="../../../server/7.1/manage/manage-security/manage-users-and-roles.html" class="xref page">Manage Users, Groups, and Roles</a> page.</p>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>Cluster.connect</code> returns a <code>Try[Cluster]</code>, as the Scala client uses functional error handling and does not throw exceptions.
You&#8217;ll see examples later of how to better handle a <code>Try</code>, but for simplicity here we&#8217;ll assume the operation succeeded and get the result as a <code>Cluster</code> using <code>.get</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Following successful authentication, the bucket can be opened:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L67-L68">val bucket = cluster.bucket(bucketName)
bucket.waitUntilReady(30.seconds).get</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We are working with the <a href="../../../server/7.1/manage/manage-settings/install-sample-buckets.html" class="xref page">travel-sample</a> data bucket.
If you are not, update the <code>bucketName</code> variable used in the example with your own.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>waitUntilReady</code> is an optional call.
Opening resources such as buckets is asynchronous&#8201;&#8212;&#8201;that is, the <code>cluster.bucket</code> call returns immediately and proceeds in the background.
<code>waitUntilReady</code> ensures that the bucket resource is fully loaded before proceeding.
If not present, then the first Key Value (KV) operation on the bucket will wait for it to be ready.
As with <code>Cluster.connect</code>, we use <code>.get</code> on the result here for simplicity.</p>
</div>
<div class="paragraph">
<p>The Scala SDK supports full integration with the <a href="../concept-docs/collections.html" class="xref page">Collections</a> feature introduced in Couchbase Server 7.0.
<em>Collections</em> allow documents to be grouped by purpose or theme, according to a specified <em>Scope</em>.
Here we will use the <code>users</code> collection within the <code>tenant_agent_00</code> scope from <code>travel-sample</code> bucket as an example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L72-L75">// get a reference to the default collection, required for Couchbase server 6.5 or earlier
// val collection = bucket.defaultCollection

val collection = bucket.scope("inventory").collection("airport")</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not refer to a named collection, you can access the 'default collection', which includes all documents in a bucket, and is forwards and backwards compatible with all supported versions of Couchbase Server.</p>
</div>
</div>
<div class="sect2">
<h3 id="json"><a class="anchor" href="#json"></a>JSON</h3>
<div class="paragraph">
<p>Now we can do some simple Key Value operations.  First, let&#8217;s create some JSON.</p>
</div>
<div class="paragraph">
<p>The Scala SDK directly supports several popular JSON libraries, including <a href="https://github.com/lihaoyi/upickle">uPickle/uJson</a>, <a href="https://circe.github.io/circe/">Circe</a>, <a href="https://github.com/playframework/play-json">Play Json</a>, <a href="https://github.com/typelevel/jawn">Jawn</a>, and <a href="https://github.com/json4s/json4s">Json4s</a> (if you&#8217;d like to see your favorite supported, please let us know).
In addition you can supply JSON encoded into a <code>String</code> or <code>Array[Byte]</code>, opening the door to any JSON library; <a href="https://jsoniter.com/">Jsoniter</a> and <a href="https://github.com/FasterXML/jackson">Jackson</a> have been tested this way, but any should work.</p>
</div>
<div class="paragraph">
<p>You can also directly encode and decode Scala case classes to and from the SDK.</p>
</div>
<div class="paragraph">
<p>To make things easy and to help get you started, the Scala SDK also bundles a home-grown small JSON library, which you are free to use instead of or alongside any of the other supported JSON libraries.
The philosophy behind this library is to provide a very easy-to-use API and the fastest JSON implementation possible.</p>
</div>
<div class="paragraph">
<p>These options are described in detail <a href="../howtos/json.html" class="xref page">here</a>, but to get us started let&#8217;s created some simple JSON using the built-in JsonObject library:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L79">val json = JsonObject("status" -&gt; "awesome")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="key-value-operations"><a class="anchor" href="#key-value-operations"></a>Key-Value Operations</h3>
<div class="paragraph">
<p>And now let&#8217;s upsert it into Couchbase (upsert is an operation that will insert the document if it does not exist, or replace it if it does).
We need to provide a unique ID for the JSON, and we&#8217;ll use a UUID here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L83-L87">val docId = UUID.randomUUID().toString
collection.upsert(docId, json) match {
  case Success(result)    =&gt;
  case Failure(exception) =&gt; println("Error: " + exception)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As mentioned above, the Scala SDK will not throw exceptions.
Instead, methods that can error - such as the <code>upsert</code> above - will return a Scala <code>Try</code> result, which can either be a <code>Success</code> containing the result, or a <code>Failure</code> containing a <em>Throwable</em> exception.
The easiest way to handle a single operation is with pattern matching, as shown above.</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s get the data back (this example will look a little messy due the the nested handling of multiple <code>Try</code> results, but we&#8217;ll see how to clean it up shortly):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L91-L105">// Get a document
collection.get(docId) match {
  case Success(result) =&gt;
    // Convert the content to a JsonObjectSafe
    result.contentAs[JsonObjectSafe] match {
      case Success(json) =&gt;
        // Pull out the JSON's status field, if it exists
        json.str("status") match {
          case Success(hello) =&gt; println(s"Couchbase is $hello")
          case _              =&gt; println("Field 'status' did not exist")
        }
      case Failure(err) =&gt; println("Error decoding result: " + err)
    }
  case Failure(err) =&gt; println("Error getting document: " + err)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we&#8217;re fetching the value for the key <code>docId</code>, converting that value to a <code>JsonObjectSafe</code> (a simple wrapper around <code>JsonObject</code> that returns <code>Try</code> results - see <a href="../howtos/json.html#error-handling-and-jsonobjectsafe" class="xref page">here</a> for details), and then accessing the value of the <strong>status</strong> key as a String.</p>
</div>
</div>
<div class="sect2">
<h3 id="better-error-handling"><a class="anchor" href="#better-error-handling"></a>Better Error Handling</h3>
<div class="paragraph">
<p>All three of these operations could fail, so there&#8217;s quite a lot of error handling code here to do something quite simple.
One way to improve on this is by using flatMap, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L125-L133">val result: Try[String] = collection
  .get(docId)
  .flatMap(_.contentAs[JsonObjectSafe])
  .flatMap(_.str("status"))

result match {
  case Success(status) =&gt; println(s"Couchbase is $status")
  case Failure(err)    =&gt; println("Error: " + err)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use a for-comprehension, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L110-L119">val result: Try[String] = for {
  result &lt;- collection.get(docId)
  json &lt;- result.contentAs[JsonObjectSafe]
  status &lt;- json.str("status")
} yield status

result match {
  case Success(status) =&gt; println(s"Couchbase is $status")
  case Failure(err)    =&gt; println("Error: " + err)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Either of these methods will stop on the first failed operation.  So the final returned <code>Try</code> contains either a) <code>Success</code> and the result of the final operation, indicating that everything was successful, or b) <code>Failure</code> with the error returned by the first failing operation.</p>
</div>
</div>
<div class="sect2">
<h3 id="overloads"><a class="anchor" href="#overloads"></a>Overloads</h3>
<div class="paragraph">
<p>You&#8217;ll notice that most operations in the Scala SDK have two overloads.
One will take an Options builder, which provides all possible options that operation takes.
For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L139-L148">collection.replace(
  docId,
  json,
  ReplaceOptions()
    .expiry(10.seconds)
    .durability(Durability.Majority)
) match {
  case Success(status) =&gt;
  case Failure(err)    =&gt; println("Error: " + err)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These options blocks are implemented as Scala case classes, e.g. they are immutable data objects that return a copy of themselves on each change.</p>
</div>
<div class="paragraph">
<p>The other overload is provided purely for convenience.  It takes named arguments instead of an Options object, and provides only the most commonly used options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-scala hljs" data-lang="scala" data-source-url="file:///Users/mariashodunke/Couchbase/docs/docs-sdk-scala//modules/hello-world/examples/Cloud.scala#L154-L157">collection.replace(docId, json, durability = Durability.Majority) match {
  case Success(status) =&gt;
  case Failure(err)    =&gt; println("Error: " + err)
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps"><a class="anchor" href="#next-steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now you&#8217;re up and running, try one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Our <a href="sample-application.html" class="xref page">Travel Sample Application</a> demonstrates all the basics you need to know;</p>
</li>
<li>
<p>Explore <a href="../howtos/kv-operations.html" class="xref page">Key Value Operations</a> (CRUD) against a document database;</p>
</li>
<li>
<p>Or <a href="../howtos/n1ql-queries-with-sdk.html" class="xref page">Query</a> with our SQL-based N1QL language;</p>
</li>
<li>
<p>Try longer-running queries with our <a href="../howtos/analytics-using-sdk.html" class="xref page">Analytics Service</a>;</p>
</li>
<li>
<p>A <a href="../howtos/full-text-searching-with-sdk.html" class="xref page">Full Text Search</a>;</p>
</li>
<li>
<p>Or read up on <a href="../concept-docs/data-services.html" class="xref page">which service fits your use case</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="additional-resources"><a class="anchor" href="#additional-resources"></a>Additional Resources</h3>
<div class="paragraph">
<p>The Scala SDK includes three APIs.
The examples above show the simple blocking API, for simplicity, but you can also perform all operations in an async style using Scala <code>Future</code>, and a reactive style using Project Reactor <code>SMono</code> and <code>SFlux</code>.
Please see <a href="../howtos/concurrent-async-apis.html" class="xref page">Choosing an API</a> for more details.</p>
</div>
<div class="paragraph">
<p>The API reference is generated for each release and the latest can be found <a href="https://docs.couchbase.com/sdk-api/couchbase-scala-client/com/couchbase/client/scala/index.html">here</a>.</p>
</div>
<div class="paragraph">
<p>Couchbase welcomes community contributions to the Scala SDK.
The SDK source code is available on <a href="https://github.com/couchbase/couchbase-jvm-clients">GitHub</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h3>
<div class="ulist">
<ul>
<li>
<p>Couchbase Server is designed to work in the same WAN or availability zone as the client application.
If you&#8217;re running the SDK on your laptop against a Capella cluster, see further information on:</p>
<div class="ulist">
<ul>
<li>
<p>Notes on <a href="../ref/client-settings.html#constrained-network-environments" class="xref page">Constrained Network Environments</a>.</p>
</li>
<li>
<p><a href="../project-docs/compatibility.html#network-requirements" class="xref page">Network Requirements</a>.</p>
</li>
<li>
<p>If you have a consumer-grade router which has problems with DNS-SRV records review our <a href="../howtos/troubleshooting-cloud-connections.html#troubleshooting-host-not-found" class="xref page">Troubleshooting Guide</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Our <a href="https://forums.couchbase.com/c/scala-sdk/37">community forum</a> is a great source of help.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"SDKs","components":["dotnet-sdk","c-sdk","go-sdk","java-sdk","nodejs-sdk","php-sdk","python-sdk","ruby-sdk","scala-sdk","cxx-txns"],"url":"/home/sdk.html","latestVersions":{"dotnet-sdk":"3.3","c-sdk":"3.3","go-sdk":"2.5","java-sdk":"3.3","nodejs-sdk":"4.1","php-sdk":"4.0","python-sdk":"4.0","ruby-sdk":"3.3","scala-sdk":"1.3","cxx-txns":"DOC-9740"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
