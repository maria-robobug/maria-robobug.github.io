<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Querying and Searching Couchbase Server Community Edition (CE) | Couchbase Docs (Local)</title>
<link rel="canonical" href="https://maria-robobug.github.io/DOC-9205/tutorials/getting-started-ce/query-search/tutorial_en.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="tutorials">
<meta name="dcterms.identifier" content="master">
<meta name="page-url" content="/tutorials/getting-started-ce/query-search/tutorial_en.html">
<meta name="generator" content="Antora 3.0.0-beta.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://maria-robobug.github.io/DOC-9205/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://maria-robobug.github.io/DOC-9205/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../cloud-native-database/index.html">
                      Cloud-Native
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../index.html">
                      Tutorials
                      <span class="arrow">
                        <i class="fas fa-arrow-right"></i>
                      </span>
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a href="https://cloud.couchbase.com/sign-up" class="free-trial-link" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  <i class="fas fa-cloud"></i>
                  Free Trial
                </a>
                <a class="btn btn-primary try-btn"  onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
<div class="components">
  <div class="components_group-title">
    <a href="../../index.html">Tutorials</a>
  </div>
  <ul class="components_list">
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Tutorials</span>
      </div>
      <div class="version_items hide" data-version="master">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Get Started with Couchbase Cloud Self-Service Trials</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../cbc-self-service-trials/index.html">Overview</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../cbc-self-service-trials/getting-started.html">Get Started with Your Trial Cluster</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../cbc-azure-cloud/azure-cloud-connection-prerequisites.html">Azure Cloud Connection Prerequisites</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../cbc-self-service-trials/using-sdks-with-couchbase-cloud.html">Using SDKs with Couchbase Cloud</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../cbc-self-service-trials/analytics-bi-with-couchbase-cloud.html">Analytics and BI with Couchbase Cloud</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../cbc-self-service-trials/eventing-with-couchbase-cloud.html">Eventing with Couchbase Cloud</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#cloud::index.adoc">Go to Couchbase Cloud Documentation</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Get Started with Couchbase Community Edition</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../index.html">Overview</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../install-manage/tutorial_en.html">Install and Manage</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../import-data/tutorial_en.html">Import existing data</a>
  </span>
</li>
<li class="menu_list is-current-page" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="tutorial_en.html">Queries and Search</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../setup-cluster/tutorial_en.html">Set up a cluster</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../dev-nodejs/tutorial_en.html">Development with Node.js</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../dev-java/tutorial_en.html">Development with Java</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../mobile-android/tutorial_en.html">Couchbase Mobile on Android</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Server</span>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Session Storage</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../session-storage/install.html">Configure Couchbase Cluster</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../session-storage/aspnet.html">ASP.NET Core</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../session-storage/java.html">Java</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../session-storage/udf.html">UDF</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">User Profile Storage</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../profile-store/install.html">Configure Couchbase Cluster</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../profile-store/java.html">Java</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../profile-store/dotnet.html">.Net</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../profile-store/building-indexes.html">Indexing</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Couchbase Mobile</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Travel Sample
Unresolved include directive in modules/ROOT/nav.adoc - include::mobile-travel-sample:partial$nav.adoc[]</span>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:userprofile_basic.adoc">Getting Started on iOS</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:xamarin/userprofile_basic.adoc">Getting Started on Xamarin</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#standalone@userprofile-couchbase-mobile:userprofile:android/userprofile_basic.adoc">Getting Started on Android</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="#tutorials:swift-playground:overview.adoc">Xcode Playground</a>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Recycler Views with Live Queries
Unresolved include directive in modules/ROOT/nav.adoc - include::university-lister:partial$nav.adoc[]</span>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Build a Cordova Plugin
Unresolved include directive in modules/ROOT/nav.adoc - include::hotel-lister:partial$nav.adoc[]</span>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Build a React Native Module
Unresolved include directive in modules/ROOT/nav.adoc - include::hotel-finder:partial$nav.adoc[]</span>
  </span>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">OpenID Connect Tutorial
Unresolved include directive in modules/ROOT/nav.adoc - include::openid-connect-implicit-flow:partial$nav.adoc[]</span>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Build Your Own</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <span class="menu_title menu_text">Tutorial Template
Unresolved include directive in modules/ROOT/nav.adoc - include::tutorial-template:partial$nav.adoc[]</span>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
  </ul>
</div>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/mariashodunke/Couchbase/docs/tutorials-contrib//modules/getting-started-ce/pages/query-search/tutorial_en.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../../index.html">Tutorials</a></li>
<li class="crumb">Get Started with Couchbase Community Edition</li>
<li class="crumb"><a href="tutorial_en.html">Queries and Search</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Querying and Searching Couchbase Server Community Edition (CE)</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial will walk you through the different ways to query data: N1QL and full text search.</p>
</div>
<div class="paragraph">
<p>This tutorial was built using the <a href="https://docs.couchbase.com/server/current/introduction/editions.html">Community Edition(CE)</a> of Couchbase Server, so you can use this distribution to follow this guide free of charge.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="querying-using-n1ql"><a class="anchor" href="#querying-using-n1ql"></a>Querying Using N1QL</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="basics-of-n1ql"><a class="anchor" href="#basics-of-n1ql"></a>Basics of N1QL</h3>
<div class="paragraph">
<p><code>N1QL</code> is a query language that uses a SQL-like syntax, but it operates on structured and flexible <code>JSON</code> documents, returning other <code>JSON</code> documents in response.</p>
</div>
<div class="paragraph">
<p>A basic <code>N1QL</code> query has the structure below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SELECT&#8201;&#8212;&#8201;The fields of each document to return</p>
</li>
<li>
<p>FROM&#8201;&#8212;&#8201;The data bucket in which to look</p>
</li>
<li>
<p>WHERE&#8201;&#8212;&#8201;The conditions that the document must satisfy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>N1QL</code> consult can be run from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Command line, using the <code>cbq</code> tool</p>
</li>
<li>
<p><code>Query</code> in the <code>Couchbase Server Web UI</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>N1QL</code> uses indexes in order to do its work, to make a bucket queryable, it must have at least one index defined. There are two types of indexes, a <code>primary index</code> that can issue non-covered queries on the bucket and a <code>secondary index</code> that contains a filtered or a full set of keys of a given bucket, they&#8217;re optional but increase query efficiency on a bucket. In this case, we will create a <code>secondary index</code> on a <code>movies</code> bucket:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">CREATE INDEX ix_movies_genre ON `movies`(genre);</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create this index and to realize the queries, we are going to use, for now, the <code>Query</code> tab, as explained in next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="querying-by-using-the-query-workbench"><a class="anchor" href="#querying-by-using-the-query-workbench"></a>Querying by Using the Query Workbench</h3>
<div class="paragraph">
<p>Query is an interactive tool that lets you create and execute <code>N1QL</code> queries, it&#8217;s included in <code>Couchbase Server Web UI</code>.</p>
</div>
<div class="paragraph">
<p>Before anything, for later examples, you must have loaded the <code>bucket movies</code> as shown in the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cbtransfer /home/couchbase/movies.csv http: // localhost: 8091 -B movies -u Administrator -p password</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, with your appropriate credentials, access to the <code>Web UI</code> by typing <a href="http://localhost:8091" class="bare">http://localhost:8091</a> into the address-field at the top of your browser, the login screen will look like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/login.png" alt="login" width="25%">
</div>
</div>
<div class="paragraph">
<p>Once on the login page, type your appropriate credentials and sign in. The home page will show you the dashboard of your cluster, on the left side you must select the <code>Query</code> tab:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/queryworkbench.png" alt="queryworkbench" width="66%">
</div>
</div>
<div class="paragraph">
<p>As shown, in the image, <code>Query</code> has three main areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query Editor: Where you will type your N1QL query</p>
</li>
<li>
<p>Data Insights: Provides information on the buckets that are currently maintained by your system</p>
</li>
<li>
<p>Query Results: Shows query results and provides options for their display</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create the index previously seen, you must execute that line in <code>Query</code> as you can see here:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/createindexquery.png" alt="createindexquery" width="66%">
</div>
</div>
<div class="paragraph">
<p>That will allow you to query the <code>movies</code> bucket concerning a concrete genre, for example, the following code line returns the <code>name</code> and <code>year</code> of the movies into the <code>movies</code> bucket, which their genre is <code>Crime&amp;Drama</code> like is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">SELECT name, year FROM `movies` WHERE genre="Crime&amp;Drama";</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/executingqueryonworkbench.png" alt="executingqueryonworkbench" width="66%">
</div>
</div>
<div class="paragraph">
<p>At this point three movies were found in the <code>movies</code> bucket with the specific genre.
For more information about it, refer to the Couchbase documentation for <a href="https://docs.couchbase.com/server/current/tools/query-workbench.html">Query Workbench</a>.
This kind of query can also be done from the console window as shown in next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="querying-by-using-the-interactive-query-shell"><a class="anchor" href="#querying-by-using-the-interactive-query-shell"></a>Querying by Using the Interactive Query Shell</h3>
<div class="paragraph">
<p>To run the interactive query shell (<code>cbq</code>), type on your console window the following line, to navigate to the Couchbase bin directory, and start <code>cbq</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /opt/couchbase/bin
./cbq -u Administrator -p password -engine=http://127.0.0.1:8091/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once do that, you are on <code>cbq</code> shell prompt, which allows you to start to execute <code>N1QL</code> commands on your console. For example, if you want to know how many movies with <code>Drama</code> genre were made in <code>1994</code> and are stored in the <code>movies</code> bucket, you need to type this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cbq&gt; SELECT * FROM `movies` WHERE genre="Drama" AND year=1994;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The console will show the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">{
    "requestID": "e01ae981-cb0d-48ac-8cd2-59224ece52d2",
    "signature": {
        "*": "*"
    },
    "results": [
        {
            "movies": {
                "genre": "Drama",
                "id": "movie_1",
                "name": "The Shawshank Redemption",
                "year": 1994
            }
        }
    ],
    "status": "success",
    "metrics": {
        "elapsedTime": "2.388205ms",
        "executionTime": "2.265674ms",
        "resultCount": 1,
        "resultSize": 197
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see there is only one <code>movie</code> with those requirements. If you need more detailed information about this, refer to the Couchbase documentation for <a href="https://docs.couchbase.com/server/current/tools/cbq-shell.html">The Command Line Shell for N1QL</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="full-text-search"><a class="anchor" href="#full-text-search"></a>Full Text Search</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section will show you how with <code>Full Text Search</code> (FTS) you can create, manage, and query specially purposed indexes, stored in <code>JSON</code> documents within a Couchbase bucket.</p>
</div>
<div class="sect2">
<h3 id="features-of-full-text-search"><a class="anchor" href="#features-of-full-text-search"></a>Features of Full Text Search</h3>
<div class="paragraph">
<p><code>FTS</code> has several options to perform queries in natural language such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Language-aware searching; enables users to search, for example, the word <code>technician</code>, and also obtain results for <code>technology</code> and <code>technique</code></p>
</li>
<li>
<p>Scoring of results, according to relevancy; permits users to obtain result-sets with only documents that have had the highest scores, this achieve decrease the result-sets</p>
</li>
<li>
<p>Fast indexes, which support a wide range of possible text-searches</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>FTS</code> uses Bleve for the indexing of documents, and it also makes Bleve&#8217;s extensive range of query types able to be used, these contain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Match, Match Phrase, Doc ID, and Prefix queries</p>
</li>
<li>
<p>Conjunction, Disjunction, and Boolean field queries</p>
</li>
<li>
<p>Numeric Range and Date Range queries</p>
</li>
<li>
<p>Geospatial queries</p>
</li>
<li>
<p>Query String queries, which employ a special syntax to express the details of each query. See head <a href="qsq">Query String Query</a> for information</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="preparing-for-full-text-searches"><a class="anchor" href="#preparing-for-full-text-searches"></a>Preparing for Full Text Searches</h3>
<div class="paragraph">
<p>Before to trying a <code>FTS</code> you should guarantee the following things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Couchbase Server</code> has the <code>Search</code> service correctly enabled, the service must be enabled for a given node. See <a href="https://docs.couchbase.com/server/current/manage/manage-nodes/create-cluster.html">Create a cluster</a> for more information</p>
</li>
<li>
<p>Create an index appropriately, employing the <code>Web UI</code>. For basic information about it refer to section <a href="#sfui">Searching from the UI</a> and for detailed information see <a href="https://docs.couchbase.com/server/current/fts/fts-creating-indexes.html">Creating Indexes</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Throughout index creation, you can select or create, and use an analyzer. In case you didn&#8217;t, a default analyzer will be assigned to you. See more information about analyzers creation in <a href="https://docs.couchbase.com/server/current/fts/fts-creating-indexes.html">Creating Indexes</a> and their functionality and components <a href="https://docs.couchbase.com/server/current/fts/fts-using-analyzers.html">Understanding Analyzers</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="performing-full-text-searches"><a class="anchor" href="#performing-full-text-searches"></a>Performing Full Text Searches</h3>
<div class="paragraph">
<p><code>FTS</code> can be achieved using the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>Couchbase Web UI</code>. Refer to section <a href="#sfui">Searching from the UI</a></p>
</li>
<li>
<p>The <code>Couchbase REST API</code>. Refer to section <a href="#sfra">Searching with the REST API</a> and to page <a href="https://docs.couchbase.com/server/current/rest-api/rest-fts.html">Full Text Search API</a></p>
</li>
<li>
<p>The <code>Couchbase SDK</code>. Refer to our tutorial <a href="../tutorial_en.html">Developing on Couchbase CE with Python / Java</a></p>
</li>
<li>
<p>The <code>N1QL Search functions</code>. These allow you to perform a <code>FTS</code> as part of a N1QL query. Refer to the Couchbase documentation for <a href="https://docs.couchbase.com/server/6.5/n1ql/n1ql-language-reference/searchfun.html">Search Function</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sfui"><a class="anchor" href="#sfui"></a>Searching from the UI</h3>
<div class="paragraph">
<p>In this part, you can see an example of a search from the <code>Couchbase Web UI</code> considering all the above.</p>
</div>
<div class="paragraph">
<p>On the left side of your <code>Web UI</code>, you must select the Search tab, that will be displayed like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/fulltextsearch.png" alt="fulltextsearch" width="66%">
</div>
</div>
<div class="sect3">
<h4 id="create-an-index"><a class="anchor" href="#create-an-index"></a>Create an Index</h4>
<div class="paragraph">
<p>To create an index press <code>Add Index</code> button which will be shown as below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/createanindex.png" alt="createanindex" width="30%">
</div>
</div>
<div class="paragraph">
<p>To create a basic index you need to define a unique name for the index (Note that only alphanumeric characters, hyphens, and underscores are allowed for index names, and the first character of the name must be an alphabetic character). After that, you must select the bucket and press the <code>Create Index</code> button. This is all you need to specify, to create a basic index for test and development. However, such default indexing is not recommended for production environments, to review the wide range of options for creating indexes, refer to the Couchbase documentation for <a href="https://docs.couchbase.com/server/current/fts/fts-creating-indexes.html">Creating Indexes</a>.</p>
</div>
<div class="paragraph">
<p>Now you are returned to the <code>FTS</code> screen, once there, you need to wait for the build progress until it reaches 100%. After that you can start to realize searches by all available means: the <code>Web UI</code>, the <code>Couchbase REST API</code>, and the <code>Couchbase SDK</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="perform-a-query"><a class="anchor" href="#perform-a-query"></a>Perform a Query</h4>
<div class="paragraph">
<p>To perform a query, type a word into the text-field of the selected index, for example, <code>adventure</code>, then click on the Search button and it will show the <code>Search Results</code> as shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/searching.png" alt="searching" width="66%">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sfra"><a class="anchor" href="#sfra"></a>Searching with the REST API</h3>
<div class="paragraph">
<p>On the <code>Search Result</code> page, to the immediate right of the <code>Search</code> button, appears the show advanced query settings checkbox. Check this to display the advanced settings:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/advancedquerysettings.png" alt="advancedquerysettings" width="66%">
</div>
</div>
<div class="paragraph">
<p>Additionally, the <code>JSON for Query Request</code> panel displays the submitted query in <code>JSON</code> format, and next to it, has a checkbox with the possibility to complete a curl command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/curlcommand.png" alt="curlcommand" width="66%">
</div>
</div>
<div class="paragraph">
<p>This curl command allows to execute the search outside of the current session within the <code>Web UI</code>, taking into account that the credentials for authentication are required.</p>
</div>
</div>
<div class="sect2">
<h3 id="ua"><a class="anchor" href="#ua"></a>Creating Queries</h3>
<div class="paragraph">
<p>In this chapter you will learn to use, through examples, some types of the most relevant queries that are part of the wide range of available queries, using the query syntax of the Couchbase <code>REST API</code>. We will continue to use, for next examples, data from the <code>movies</code> bucket with their respective index.</p>
</div>
</div>
<div class="sect2">
<h3 id="qsq"><a class="anchor" href="#qsq"></a>Query String Query</h3>
<div class="paragraph">
<p>A <code>Query String</code> can be used to express a given query using a special syntax. This query-type combines standard alphanumeric characters with syntactic elements, in order to specify complex queries in ASCII form.
Moreover, the <code>full text query syntax help</code> link below the Search text-field on page Search Results shows detailed information about <code>Query String FTS</code> queries.
If you want to realize this kind of query into a curl command, you need to execute it as follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -u Administrator:password -XPOST -H "Content-Type: application/json" \
http://localhost:8094/api/index/movies-index/query \
-d '{
  "explain": true,
  "fields": [
    "*"
  ],
  "highlight": {},
  "query": {
     "query": "+drama +pulp"
   }
}'</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="match-query"><a class="anchor" href="#match-query"></a>Match query</h4>
<div class="paragraph">
<p>Match query belongs to the group of <code>Simple Queries</code>, it analyzes input text and uses the results to query an index. Options include specifying an analyzer, performing a fuzzy match, and performing a prefix match. When fuzzy matching is used, if the single parameter is set to a non-zero integer, the analyzed text is matched with a corresponding level of fuzziness. The maximum supported fuzziness is 2. When a prefix match is used, the prefix_length parameter specifies that for a match to occur, a prefix of specified length must be shared by the input-term and the target text-element.</p>
</div>
<div class="paragraph">
<p>Here you can see an example of match query use into a curl command, ready to execute it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -u Administrator:password -XPOST -H "Content-Type: application/json" \
http://localhost:8094/api/index/movies-index/query \
-d '{
  "explain": true,
  "fields": [
    "*"
  ],
  "highlight": {},
  "query": {
       "match": "drama",
      "field": "genre",
      "analyzer": "standard",
      "fuzziness": 2,
      "prefix_length": 3
    }
}'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="conjunction-query-and"><a class="anchor" href="#conjunction-query-and"></a>Conjunction Query (AND)</h4>
<div class="paragraph">
<p>Conjunction query is a type of <code>Compound Queries</code> that contains multiple child queries. Its result documents must satisfy all of the child queries, the opposite of Disjunction Query (OR).
Below is an example of this type of query ready to run into a curl command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -u Administrator:password -XPOST -H "Content-Type: application/json" \
http://localhost:8094/api/index/movies-index/query \
-d '{
  "explain": true,
  "fields": [
    "*"
  ],
  "highlight": {},
  "query": {
       "conjuncts":[
        {"field":"genre", "match": "drama"},
        {"field":"name", "match": "movie_1"}
      ]
   }
}'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="numeric-range-query"><a class="anchor" href="#numeric-range-query"></a>Numeric Range Query</h4>
<div class="paragraph">
<p>Numeric range query is a type of <code>Range Queries</code> which finds documents containing a numeric value in the specified field within the specified range. This query defines the endpoints using the fields min and max.
Here is an example of use of this query into a curl command, using their specifics options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -u Administrator:password -XPOST -H "Content-Type: application/json" \
http://localhost:8094/api/index/movies-index/query \
-d '{
  "explain": true,
  "fields": [
    "*"
  ],
  "highlight": {},
   "query": {
      "min": 1966, "max": 2000,
      "inclusive_min": false,
      "inclusive_max": false,
      "field": "year"
      }
}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, some query-types have been explained in broad strokes, for more specificity, go to the Couchbase documentation for <a href="https://docs.couchbase.com/server/current/fts/fts-query-types.html">Query Types</a> where you will find detailed information about it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="response-object"><a class="anchor" href="#response-object"></a>Response Object</h3>
<div class="paragraph">
<p>Once executed these queries, the successful message should look like follows, which indicates that you have achieved a right <code>FTS</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">"status": {
     "total": 6,
     "failed": 0,
     "successful": 6
},</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps"><a class="anchor" href="#next-steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend you to follow our next tutorials, go to the <a href="../index.html" class="xref page">Getting Started with Couchbase Community Edition</a> page to find the full list.</p>
</div>
<div class="paragraph">
<p>Also, you could review <a href="https://docs.couchbase.com/home/index.html">Couchbase Documentation</a> to learn more about all sorts of topics.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
