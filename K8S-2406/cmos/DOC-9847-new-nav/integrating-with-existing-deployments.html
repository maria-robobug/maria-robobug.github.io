<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Integrating CMOS with Existing Monitoring Stacks | Couchbase Docs (Local)</title>
<link rel="stylesheet" href="../../_/css/site.css">
<script src="../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="cmos">
<meta name="dcterms.identifier" content="DOC-9847-new-nav">
<meta name="page-url" content="/cmos/DOC-9847-new-nav/integrating-with-existing-deployments.html">
<meta name="generator" content="Antora 3.0.1">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://maria-robobug.github.io/home/index.html">
                    <img src="../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://maria-robobug.github.io/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../cloud-native-database/index.html">
                      Cloud-Native
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/mariashodunke/Couchbase/docs/observability//docs/modules/ROOT/pages/integrating-with-existing-deployments.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="index.html">Couchbase Monitoring and Observability Stack</a></li>
<li class="crumb">Deployment</li>
<li class="crumb"><a href="integrating-with-existing-deployments.html">Integrating with existing monitoring pipelines</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Integrating CMOS with Existing Monitoring Stacks</h1>
<div class="labels">
<ul>
<li class="status"><span>Developer Preview</span></li>
</ul>
</div>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
You can integrate CMOS with your existing Prometheus, Alertmanager, and Grafana monitoring system.
This tutorial documents how to configure each component in order to achieve this.
</blockquote>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Tutorials are provided to demonstrate how a particular problem may be solved.
Tutorials are accurate at the time of writing but rely heavily on third party software.
The third party software is not directly supported by Couchbase.
For further help in the event of a problem, contact the relevant software maintainer.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pre-requisites"><a class="anchor" href="#pre-requisites"></a>Pre-requisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The environment you wish to integrate CMOS into must have:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>At least one <strong>Couchbase Server</strong> node;</p>
</li>
<li>
<p><strong>Prometheus</strong>, with <strong>Alertmanager</strong> installed;</p>
</li>
<li>
<p><strong>Grafana</strong>, configured to use the Prometheus server as a Data Source;</p>
<div class="ulist">
<ul>
<li>
<p><strong>Docker</strong>, to run the Cluster Monitor&#8217;s Docker image</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="install-cluster-monitor"><a class="anchor" href="#install-cluster-monitor"></a>Install Cluster Monitor</h3>
<div class="paragraph">
<p>Currently there is no separate image containing just the Cluster Monitor - you can follow issue <a href="https://issues.couchbase.com/browse/CMOS-351" target="_blank" rel="noopener">CMOS-351</a> for updates on this option.
However, it is possible to use the main CMOS container with all other services disabled for this purpose.</p>
</div>
<div class="paragraph">
<p>Run the Docker container, using the preview image given to you by Couchbase:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">docker run -d --rm \
  -p 7196:7196 \ <i class="conum" data-value="1"></i><b>(1)</b>
  -e CB_MULTI_ALERTMANAGER_URLS=http://&lt;Alertmanager IP&gt;:9093 \ <i class="conum" data-value="2"></i><b>(2)</b>
  -e CB_MULTI_ADMIN_USER=admin -e CB_MULTI_ADMIN_PASSWORD=password \
  --name cluster_monitor \
  -e DISABLE_PROMETHEUS=true -e DISABLE_GRAFANA=true \
  -e DISABLE_ALERT_MANAGER=true -e DISABLE_LOKI=true \
  -e DISABLE_JAEGER=true -e DISABLE_CMOSCFG=true -e DISABLE_WEBSERVER=true \
  couchbase/observability-stack:latest</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If you are using TLS, you will need to add <code>-p 7197:7197</code> to also expose port <code>7197</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If you are not using Alertmanager, set this to a blank value.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Docker networking <a href="https://docs.docker.com/network/#network-drivers" target="_blank" rel="noopener">defaults to bridge</a>, meaning that this container will be able to communicate with any other running Docker containers.
If your Grafana, Prometheus / Alertmanager instances are not containerized, ensure that the Cluster Monitor container can communicate with them.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configure-cluster-monitor"><a class="anchor" href="#configure-cluster-monitor"></a>Configure Cluster Monitor</h3>
<div class="paragraph">
<p>Navigate to the Web GUI, which listens by default on port <code>7196</code>.
Sign in using the credentials you provided as environment variables when you started the Cluster Monitor earlier (by default, <code>admin</code>/<code>password</code>).</p>
</div>
<div class="paragraph">
<p>Then click "Add Cluster" and enter the IP address of a node in the cluster, along with the cluster&#8217;s configured username and password.
Repeat this for every cluster you wish to add to the Cluster Monitor.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="grafana-plugins"><a class="anchor" href="#grafana-plugins"></a>Grafana: Plugins</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The instructions for each plugin offer a Grafana Cloud one-click install, a command-line based install for a running instance, or a <code>.zip</code> file which can be unpacked manually into your Grafana plugins directory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Currently, we require only <a href="https://grafana.com/grafana/plugins/marcusolsson-json-datasource/">JSON API</a>, which has associated <a href="https://grafana.com/grafana/plugins/marcusolsson-json-datasource/?tab=installation">installation instructions</a>.</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Grafana Cloud</strong>: search for the plugin <code>marcusolsson-json-datasource</code> and click install</p>
</li>
<li>
<p><strong>Command-line</strong>: <code>grafana-cli plugins install marcusolsson-json-datasource</code></p>
</li>
<li>
<p><strong>Manual download</strong>: <em>see linked instructions for latest file</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, if you:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure Grafana (v7.1+) dashboards through the use of provisioning files: <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/#plugins">specify the plugins to install in your provisioning configuration file</a>.</p>
</li>
<li>
<p>Are running Grafana in a Docker container: simply pass through an additional environment variable <code>GF_INSTALL_PLUGINS=$PLUGIN_NAME $VERSION</code> where the <code>$PLUGIN_NAME</code> and latest <code>$VERSION</code> can be found on the plugin&#8217;s homepage (linked under "installation instructions" for each).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="grafana-dashboards"><a class="anchor" href="#grafana-dashboards"></a>Grafana: Dashboards</h3>
<div class="paragraph">
<p>The CMOS dashboards can be found in the official GitHub repository under <a href="https://github.com/couchbaselabs/observability/tree/main/microlith/grafana/provisioning/dashboards">microlith/grafana/provisioning/dashboards</a>/.
Download them and copy them to a folder accessible by your Grafana installation.</p>
</div>
<div class="paragraph">
<p>The relevant setting in the Grafana configuration file, typically named <code>grafana.ini</code>, is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">[dashboards]
default_home_dashboard_path = &lt;path to dashboards&gt;/couchbase-inventory.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using <a href="https://grafana.com/docs/grafana/latest/administration/provisioning/">Grafana provisioning</a>, you will need to update the <code>providers.options.path</code> argument in your provisioning configuration file (typically named <code>grafana.yml</code>) instead.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">providers:
    - name: dashboards
      type: file
      ...
      options:
          path: /etc/grafana/provisioning/dashboards/
      ...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="grafana-data-sources"><a class="anchor" href="#grafana-data-sources"></a>Grafana: Data Sources</h3>
<div class="paragraph">
<p>Now we have the required plugins and dashboards installed, we need to configure Data Sources.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If adding through the web UI, both Cluster Monitor and Alertmanager will return 404.
This is expected and not an issue - the dashboards use sub-paths of these configured URLs which are themselves valid and exist.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Cluster Monitor (JSON API)</strong>, via the Web UI: click on <em>Add Data Source</em> and select <em>JSON API</em>.</p>
<div class="ulist">
<ul>
<li>
<p>This must be named <code>Couchbase Cluster Monitor API</code>.</p>
</li>
<li>
<p>The URL should point to the Cluster Monitor with a sub-path of <code>/api/v1</code>. The port should be <code>:7196</code>.</p>
</li>
<li>
<p>Enable <code>basicAuth</code>, with the user and password you configured.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Prometheus</strong> - this should already be configured as a Data Source.</p>
</li>
<li>
<p><strong>Alertmanager</strong> - add a new Data Source in the same way as you did for the Cluster Monitor.</p>
<div class="ulist">
<ul>
<li>
<p>This should be named <em>Alertmanager API</em>, also of type <em>JSON API</em>, and the URL should point to your Alertmanager instance.</p>
</li>
<li>
<p>Configure any authentication as needed.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you are utilizing Grafana provisioning for dashboards, and would instead like to specify this in a configuration file, then your <code>grafana.yml</code> should look something like this:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The names of these two data sources must match the below snippet exactly, otherwise the dashboards may fail to provision.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">    - name: Couchbase Cluster Monitor API
      type: marcusolsson-json-datasource
      uid: PD5070BC1AA9F8304
      url: http://&lt;Cluster Monitor URL&gt;:7196/api/v1
      basicAuth: true
      basicAuthUser: &lt;Cluster Monitor Username&gt;
      basicAuthPassword: &lt;Cluster Monitor Password&gt;
    - name: Alertmanager API
      type: marcusolsson-json-datasource
      uid: PC245499EF542F9C5
      url: http://&lt;Alertmanager URL&gt;/api/v2
      # Configure basicAuth as needed.
...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="prometheus-scrape-config"><a class="anchor" href="#prometheus-scrape-config"></a>Prometheus: Scrape config</h3>
<div class="paragraph">
<p>You will need to modify your existing Prometheus configuration file (typically named <code>prometheus.yml</code>).
Add in a <code>scrape_config</code> job for your Couchbase Server nodes:</p>
</div>
<div class="listingblock">
<div class="title">prometheus.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">global:
  scrape_interval: 30s

scrape_configs:
  - job_name: couchbase-server
    basic_auth:
      username: Administrator <i class="conum" data-value="1"></i><b>(1)</b>
      password: password <i class="conum" data-value="2"></i><b>(2)</b>
    static_configs:
      - targets:
          - &lt;Couchbase Server Node 1 IP&gt;:8091 <i class="conum" data-value="3"></i><b>(3)</b>
          - &lt;Couchbase Server Node 2 IP&gt;:8091
          ...
        labels:
          cluster: "Couchbase Server Cluster" <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>username</code> should be set to a Couchbase Server user with at least "External Stats Reader" permission.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>password</code> should be the password of the above user.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>targets</code> should specify the addresses of all the nodes in your cluster.
For a Couchbase Server 7+ cluster the port number needs to be the management port: <code>8091</code> by default, or <code>:18091</code> if you have TLS enabled.
For clusters below Couchbase Server 7.0, you should use the port that your Prometheus exporter uses.
There are alternative configuration options that do not require hard-coding the addresses - refer to the <a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config" target="_blank" rel="noopener">Prometheus documentation</a> for more details.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Any labels defined here will be added to <strong>all</strong> metrics from this cluster - you may want to configure e.g., <code>environment</code>, <code>datacenter</code> etc.</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>cluster</code> label is required, and must match the name the cluster is configured to use in the Web Console.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add another <code>scrape_config</code> job for the previously-installed Cluster Monitor:</p>
</div>
<div class="listingblock">
<div class="title">prometheus.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">...
- job_name: couchbase-cluster-monitor
  basic_auth:
    username: admin  <i class="conum" data-value="1"></i><b>(1)</b>
    password: password <i class="conum" data-value="2"></i><b>(2)</b>
  metrics_path: /api/v1/_prometheus <i class="conum" data-value="3"></i><b>(3)</b>
  static_configs:
    - targets: [&lt;Cluster Monitor IP&gt;:7196] <i class="conum" data-value="4"></i><b>(4)</b>
...</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>username</code> should be the Username you configured for the Cluster Monitor.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>password</code> should be the Password you configured for the Cluster Monitor.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>metrics_path</code> is the path to the Prometheus server running on the Cluster Monitor. This should not be changed.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>targets</code> is a list of Cluster Monitor instances for Prometheus to retrieve metrics from.
For now this should be a single server IP, listening on port <code>7196</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Restart Prometheus, and navigate to the Web UI.
If this was successful you should see your cluster listed on the page <code>/targets</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="prometheus-alerting-rules"><a class="anchor" href="#prometheus-alerting-rules"></a>Prometheus: Alerting Rules</h3>
<div class="paragraph">
<p>CMOS ships with pre-made alert definitions which can alert you about certain events in your cluster.
To take advantage of these, first download the rule definitions to somewhere your Prometheus config can access them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">wget -O prometheus-rules.yaml https://raw.githubusercontent.com/couchbaselabs/observability/main/microlith/prometheus/alerting/couchbase/couchbase-rules.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, modify your Prometheus configuration file to include this directory.
For example, if you downloaded them to <code>/etc/prometheus/alerting/</code> then you would add:</p>
</div>
<div class="listingblock">
<div class="title">prometheus.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Insert this at the top level of your prometheus.yml
rule_files:
  - /etc/prometheus/alerting/prometheus-rules.yaml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you have existing alert definitions, simply add the <code>prometheus-rules.yaml</code> file to the same directory, and specify <code>*.yaml</code> as the target for <code>rule_files</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Restart Prometheus once more, and navigate to the Web UI.
You should be able to see the new rules listed on the <code>/rules</code> page.
You may need to unhide inactive rules.</p>
</div>
</div>
<div class="sect2">
<h3 id="alertmanager"><a class="anchor" href="#alertmanager"></a>Alertmanager</h3>
<div class="paragraph">
<p>We assume that you have already configured Prometheus to send alerts to Alertmanager, and that Alertmanager has appropriate receivers created and configured.</p>
</div>
<div class="paragraph">
<p>Therefore, there is no additional configuration required.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next-steps"><a class="anchor" href="#next-steps"></a>Next Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Head on over to your Grafana Web UI.
Navigate to <em>Dashboards</em>, and select <em>Single Cluster Overview.</em></p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2022 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"CMOS","components":["cmos"],"latestVersions":{"cmos":"DOC-9847-new-nav"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../_/js/site.js"></script>
<script defer src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
</body>
</html>
